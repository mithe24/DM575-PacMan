@startuml

class Sprite {
    - Image image
    - double x
    - double y
    - double width
    - double height
    - double rotation
    --
    + void render(GraphicsContext gc)
}

class AnimatedSprite {
    - Image[] frames
    --
    + void update(double deltaSeconds)
}

enum ViewKeys {
    MAIN_MENU_VIEW
    GAME_VIEW
    PAUSE_VIEW
    GAME_OVER_VIEW
    YOU_WON_VIEW
}

class ViewManager <<singleton>> {
    - StackPane root
    - BaseView currentView
    - Map<ViewKeys, BaseView> views
    --
    + void addView(BaseView view)
    + void removeView(ViewKeys key)
    + boolean hasKey(ViewKeys key)
    + Parent getRoot()
}

class ResourceManager <<singleton>> {
    - static ResourceManager instance
    - Map<String, Image> textures
    - Image missingTexture 
    --
    - ResourceManager()
    + static ResourceManager getInstance()
    + Image getTexture()
}

abstract class BaseView <<abstract>> {
    --
    + void onEnter()
    + void onExit()
}

class MainMenuView
class PauseView
class YouWonView
class GameOverView

class GameView {
    --
    + void renderGame(double deltaSeconds)
    - void renderBoard()
    - void renderEntity(Entity entity)
}

class Image
class GraphicsContext
class Affine
abstract Parent
class GameState

Parent <|-- BaseView
BaseView <|-- MainMenuView
BaseView <|-- PauseView
BaseView <|-- YouWonView
BaseView <|-- GameOverView
BaseView <|-- GameView
Sprite <|-- AnimatedSprite

ResourceManager <.. GameView : fetches textures
GraphicsContext <.. Sprite : renders on
ViewKeys <.. ViewManager : uses as keys

GameView "1" o-- "1" GameState : renders from
Sprite "1" o-- "1" Image : compose of
AnimatedSprite "1" o-- "many" Image : compose of
ViewManager "1" *-- "many" BaseView : manages views
ResourceManager "1" *-- "many" Image : compose of
GameView "1" *-- "many" Sprite : compose of
GameView "1" *-- "many" AnimatedSprite : compose of
GameView "1" *-- "1" Affine : compose of

@enduml

